<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="com.kh.hyper.freeboard.model.dao.FreeBoardMapper">
 	
 	<sql id="boardColumn">
 		SELECT
 			   BOARD_NO boardNo,
 			   BOARD_WRITER boardWriter,
 			   BOARD_TITLE boardTitle,
 			   BOARD_CONTENT boardContent,
 			   TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') as createDate,
 			   SELECT_COUNT selectCount
 		  FROM
 		  	   TB_FREEBOARD
 		 WHERE
 		 	   STATUS = 'Y'
 	</sql>
 	
 	<select id="selectTotalCount" resultType="_int">
 		SELECT
 			   COUNT(*)
 		  FROM
 		  	   TB_FREEBOARD
 		 WHERE
 		 	   STATUS = 'Y'
 	</select>
 	
 	<select id="selectBoardList" resultType="freeBoard">
 		<include refid="boardColumn"/>
 		ORDER
 		   BY
 		   	  BOARD_NO DESC
 	</select>
 	
 	<update id="increaseCount" parameterType="long" >
 		UPDATE
 			   TB_FREEBOARD
 		   SET
 		   	   SELECT_COUNT = SELECT_COUNT + 1
 		 WHERE
 		 	   STATUS = 'Y'
 		   AND
 		   	   BOARD_NO = #{boardNo}
 	</update>
 
 	<select id="selectBoardById" parameterType="long" resultType="freeBoard">
 		<include refid="boardColumn"/>
 		   AND
 		   	   BOARD_NO = #{boardNo}
 	</select>
 
 
 </mapper>